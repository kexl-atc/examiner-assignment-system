# Examiner Assignment System v8.0.16+ Updates

## æ¦‚è¿°

æœ¬skillè®°å½•äº†v8.0.16åŠä¹‹åç‰ˆæœ¬çš„æ‰€æœ‰ä¿®æ”¹å’Œéƒ¨ç½²æ–‡ä»¶æ›´æ–°ã€‚

---

## v8.0.17 ç²¾ç¡®è¯„ä¼°ç‰ˆ - å®Œå…¨æ¨¡æ‹ŸOptaPlannerçº¦æŸ

### é—®é¢˜åˆ†æ

**ç”¨æˆ·åé¦ˆ**ï¼š
- æ¨èçš„æ—¥æœŸæ¯”é€‰å®šçš„æ—¥æœŸè¿˜çŸ­
- é€‰å®šæ—¥æœŸå†…æœªå®Œæˆæ’ç­ï¼ˆ36åœºæ’ç­ï¼Œ2äººæœªåˆ†é…ï¼‰
- è¯„ä¼°ç³»ç»Ÿæœªè¯†åˆ«å‡ºæ’ç­å¤±è´¥

**æ ¹æœ¬åŸå› **ï¼š
1. **æœªè€ƒè™‘HC6çº¦æŸ**ï¼ˆè¿ç»­ä¸¤å¤©è€ƒè¯•ï¼‰ï¼šæ¯ä¸ªå­¦å‘˜éœ€è¦è¿ç»­ä¸¤å¤©è€ƒè¯•ï¼Œä½†è¯„ä¼°ç®—æ³•æ²¡æœ‰è®¡ç®—å¯ç”¨çš„è¿ç»­æ—¥æœŸå¯¹
2. **æœªæ¨¡æ‹ŸOptaPlannerçº¦æŸæ±‚è§£**ï¼šè¯„ä¼°ç®—æ³•ä¸å®é™…æ’ç­ç®—æ³•å­˜åœ¨å·¨å¤§å·®å¼‚
3. **æ¨èé€»è¾‘é”™è¯¯**ï¼šæ¨èçš„æ—¥æœŸèŒƒå›´åŸºäºç®€å•è®¡ç®—ï¼Œè€Œéçº¦æŸæ»¡è¶³åº¦
4. **suggestedDays è¢«é”™è¯¯é™åˆ¶**ï¼š`Math.min(recommendedDays, examDates.length)` å¯¼è‡´å³ä½¿å½“å‰æ—¥æœŸä¸è¶³ï¼Œæ¨èå¤©æ•°ä¹Ÿä¸ä¼šè¶…è¿‡ç”¨æˆ·é€‰æ‹©çš„å¤©æ•°

### ä¿®å¤æ–¹æ¡ˆ

**ä¿®å¤1: optimizedAssessmentService.ts - æ¨èå¤©æ•°é€»è¾‘ä¿®å¤**

**æ–‡ä»¶**: `src/services/optimizedAssessmentService.ts`

**é—®é¢˜**: å½“å­˜åœ¨ç“¶é¢ˆæ—¶ï¼Œ`suggestedDays` è¢« `Math.min(recommendedDays, examDates.length)` é™åˆ¶ï¼Œå¯¼è‡´æ¨èçš„æ—¥æœŸä¸ä¼šæ¯”ç”¨æˆ·é€‰æ‹©çš„æ—¥æœŸé•¿ã€‚

**ä¿®å¤**:
```typescript
// ä¿®å¤å‰ï¼š
suggestedDays: Math.min(recommendedDays, examDates.length)

// ä¿®å¤åï¼š
// ä¿®å¤ï¼šå½“å­˜åœ¨ç“¶é¢ˆæ—¶ï¼ŒsuggestedDays åº”è¯¥å¤§äºå½“å‰é€‰æ‹©çš„å¤©æ•°
// ä¸å†ç”¨ Math.min é™åˆ¶ï¼Œè®©ç”¨æˆ·çŸ¥é“å®é™…éœ€è¦å¤šå°‘å¤©
const finalSuggestedDays = hasCriticalBottleneck || hasHighBottleneck
  ? recommendedDays  // æœ‰ç“¶é¢ˆæ—¶ï¼Œè¿”å›è®¡ç®—å‡ºçš„æ¨èå¤©æ•°ï¼ˆå¯èƒ½å¤§äºå½“å‰é€‰æ‹©ï¼‰
  : Math.min(recommendedDays, examDates.length)  // æ— ç“¶é¢ˆæ—¶ï¼Œä¸è¶…è¿‡å½“å‰é€‰æ‹©

return {
  ...
  suggestedDays: finalSuggestedDays,
  ...
}
```

**æ•ˆæœ**: 
- å½“å­˜åœ¨ç“¶é¢ˆæ—¶ï¼Œ`suggestedDays` å°†æ­£ç¡®åæ˜ å®é™…éœ€è¦çš„å¤©æ•°ï¼ˆå¯èƒ½å¤§äºç”¨æˆ·å½“å‰é€‰æ‹©ï¼‰
- å½“æ— ç“¶é¢ˆæ—¶ï¼Œä¿æŒåŸæœ‰é€»è¾‘ï¼Œæ¨èå¤©æ•°ä¸è¶…è¿‡å½“å‰é€‰æ‹©

---

### è§£å†³æ–¹æ¡ˆï¼ˆå…¶ä»–ï¼‰

**æ–°å¢æ–‡ä»¶**: `src/services/preciseAssessmentService.ts`

### è§£å†³æ–¹æ¡ˆ

**æ–°å¢æ–‡ä»¶**: `src/services/preciseAssessmentService.ts`

**æ ¸å¿ƒç®—æ³•**ï¼š

1. **æ¨¡æ‹ŸHC6çº¦æŸï¼ˆè¿ç»­ä¸¤å¤©è€ƒè¯•ï¼‰**
   ```typescript
   analyzeDatePairs(input): DatePair[] {
     // æ‰¾å‡ºæ‰€æœ‰è¿ç»­çš„æ—¥æœŸå¯¹
     // æ£€æŸ¥æ¯ä¸ªæ—¥æœŸå¯¹æ˜¯å¦æœ‰è¶³å¤Ÿè€ƒå®˜
     // éªŒè¯æ—¥æœŸå¯¹æ•°é‡ >= ä¸¤å¤©å­¦å‘˜æ•°é‡
   }
   ```

2. **æ¨¡æ‹ŸHC2/HC7çº¦æŸï¼ˆç§‘å®¤åŒ¹é…ï¼‰**
   ```typescript
   analyzeDepartmentCapacities(input, datePairs): DepartmentCapacity[] {
     // æŒ‰ç§‘å®¤è®¡ç®—å¯ç”¨è€ƒå®˜ç»„åˆ
     // éªŒè¯è€ƒå®˜1åŒç§‘å®¤ + è€ƒå®˜2ä¸åŒç§‘å®¤çš„å¯è¡Œæ€§
     // è¯†åˆ«é›¶å®¹é‡ç§‘å®¤
   }
   ```

3. **æ¨¡æ‹ŸHC3çº¦æŸï¼ˆç™½ç­é™åˆ¶ï¼‰**
   - è€ƒè™‘å€¼ç­è¡¨å¯¹è€ƒå®˜å¯ç”¨æ€§çš„å½±å“
   - æ’é™¤ç™½ç­ç»„è€ƒå®˜åœ¨å¯¹åº”æ—¥æœŸçš„å¯ç”¨æ€§

4. **æ¨¡æ‹ŸHC4çº¦æŸï¼ˆæ¯å¤©ä¸€åœºï¼‰**
   - è®¡ç®—æ¯å¤©æœ€å¤§å¯å®¹çº³è€ƒè¯•æ•°
   - éªŒè¯æ˜¯å¦æ»¡è¶³æ¯å¤©è€ƒè¯•éœ€æ±‚

**ä¿®æ”¹æ–‡ä»¶**: `src/pages/SchedulesPage.vue`

1. æ·»åŠ ç²¾ç¡®è¯„ä¼°æœåŠ¡å¯¼å…¥
2. æ·»åŠ ç²¾ç¡®è¯„ä¼°ç¼“å­˜çŠ¶æ€
3. æ–°å¢ `getPreciseAssessment()` å‡½æ•°
4. ä¿®æ”¹ `getAssessmentResult()` ä¼˜å…ˆä½¿ç”¨ç²¾ç¡®è¯„ä¼°ç»“æœ
5. ä¿®æ”¹ `getRecommendedDateRange()` ä½¿ç”¨ç²¾ç¡®è¯„ä¼°çš„æ¨è
6. ä¿®æ”¹ `getAssessmentDetails()` æ˜¾ç¤ºHC6çº¦æŸæ£€æŸ¥ç»“æœ
7. ä¿®æ”¹ `checkDepartmentResourceMatch()` ä½¿ç”¨ç²¾ç¡®è¯„ä¼°ç»“æœ

**å…³é”®æ”¹è¿›**ï¼š

| çº¦æŸ | è¯„ä¼°æ”¹è¿› | å½±å“ |
|------|----------|------|
| HC6 | è®¡ç®—è¿ç»­æ—¥æœŸå¯¹æ•°é‡ | è¯†åˆ«æ—¥æœŸä¸è¶³é—®é¢˜ |
| HC2/HC7 | æŒ‰ç§‘å®¤è®¡ç®—è€ƒå®˜ç»„åˆ | è¯†åˆ«ç§‘å®¤èµ„æºç“¶é¢ˆ |
| HC3 | è€ƒè™‘å€¼ç­è¡¨å½±å“ | æ›´å‡†ç¡®çš„è€ƒå®˜å¯ç”¨æ€§ |
| HC4 | è®¡ç®—æ¯å¤©æœ€å¤§åœºæ¬¡ | è¯†åˆ«åœºæ¬¡è¶…é™é—®é¢˜ |

### éƒ¨ç½²æ–‡ä»¶æ›´æ–°

**ç‰ˆæœ¬å·**: v8.0.17

**æ›´æ–°æ–‡ä»¶**:
- `deploy/win7-package/supervisor/frontend/dist/` - å®Œæ•´å‰ç«¯æ„å»º
- `deploy/win7-package/frontend/` - å‰ç«¯å¤‡ä»½
- `deploy/win7-package/VERSION.txt` - ç‰ˆæœ¬è¯´æ˜

### éªŒè¯æ–¹æ³•

#### éªŒè¯1: æ¨èå¤©æ•°é€»è¾‘ä¿®å¤
1. å¯¼å…¥å­¦å‘˜å’Œè€ƒå®˜æ•°æ®ï¼ˆç¡®ä¿æ•°æ®å­˜åœ¨ç“¶é¢ˆï¼Œå¦‚æŸç§‘å®¤è€ƒå®˜ä¸è¶³ï¼‰
2. é€‰æ‹©è¾ƒçŸ­çš„æ—¥æœŸèŒƒå›´ï¼ˆæ˜æ˜¾ä¸è¶³ä»¥å®Œæˆæ’ç­ï¼‰
3. æŸ¥çœ‹æ™ºèƒ½è¯„ä¼°æ­¥éª¤çš„æ¨èå¤©æ•°
4. **é¢„æœŸç»“æœ**: æ¨èå¤©æ•°åº”è¯¥ **å¤§äº** å½“å‰é€‰æ‹©çš„å¤©æ•°
5. **å¤±è´¥æ ‡å¿—**: æ¨èå¤©æ•°ç­‰äºæˆ–å°äºå½“å‰é€‰æ‹©å¤©æ•°

---

## v8.0.17+ æ¨èæ—¥æœŸä¿®å¤

### é—®é¢˜
å³ä½¿ç»è¿‡ v8.0.17 çš„ä¿®å¤ï¼Œæ™ºèƒ½è¯„ä¼°åˆ†ææ­¥éª¤ä¸­çš„æ¨èè€ƒè¯•æ—¥æœŸä»ç„¶ä¼šå‡ºç°æ¯”ç”¨æˆ·é€‰æ‹©çš„æ—¥æœŸè¿˜å°‘çš„é—®é¢˜ã€‚

### æ ¹æœ¬åŸå› 
åœ¨ `preciseAssessmentService.ts` å’Œ `optimizedAssessmentService.ts` ä¸­ï¼Œè®¡ç®—æ¨èå¤©æ•°æ—¶å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š

1. **preciseAssessmentService.ts**: å½“ `isCurrentSufficient` ä¸º true æ—¶ï¼Œæ²¡æœ‰ç¡®ä¿æ¨èå¤©æ•° >= å½“å‰å¤©æ•°
2. **optimizedAssessmentService.ts**: å½“æ²¡æœ‰ç“¶é¢ˆæ—¶ï¼Œä½¿ç”¨ `Math.min(recommendedDays, examDates.length)` å¯èƒ½å¯¼è‡´æ¨èå¤©æ•°å°äºå½“å‰å¤©æ•°

### ä¿®å¤æ–¹æ¡ˆ

#### ä¿®å¤1: preciseAssessmentService.ts
```typescript
// ä¿®å¤å‰ï¼š
if (!isCurrentSufficient) {
  recommendedDays = Math.max(recommendedDays, currentDays + 5)
}
// å½“ isCurrentSufficient ä¸º true æ—¶ï¼ŒrecommendedDays å¯èƒ½å°äº currentDays

// ä¿®å¤åï¼š
if (!isCurrentSufficient) {
  recommendedDays = Math.max(recommendedDays, currentDays + 5)
} else {
  // ğŸ”§ ä¿®å¤ï¼šå³ä½¿å½“å‰çœ‹ä¼¼è¶³å¤Ÿï¼Œä¹Ÿç¡®ä¿æ¨èå¤©æ•°ä¸å°äºå½“å‰å¤©æ•°
  recommendedDays = Math.max(recommendedDays, currentDays)
}
```

#### ä¿®å¤2: optimizedAssessmentService.ts
```typescript
// ä¿®å¤å‰ï¼š
const finalSuggestedDays = hasCriticalBottleneck || hasHighBottleneck
  ? recommendedDays
  : Math.min(recommendedDays, examDates.length)  // å¯èƒ½å¯¼è‡´æ¨èå¤©æ•° < å½“å‰å¤©æ•°

// ä¿®å¤åï¼š
const finalSuggestedDays = hasCriticalBottleneck || hasHighBottleneck
  ? Math.max(recommendedDays, examDates.length + 5)  // æœ‰ç“¶é¢ˆæ—¶ï¼Œè‡³å°‘æ¯”å½“å‰å¤š5å¤©
  : Math.max(recommendedDays, examDates.length)      // æ— ç“¶é¢ˆæ—¶ï¼Œè‡³å°‘ç­‰äºå½“å‰å¤©æ•°
```

### æ ¸å¿ƒåŸåˆ™
æ¨èå¤©æ•°åº”è¯¥éµå¾ªä»¥ä¸‹è§„åˆ™ï¼š
1. **å¦‚æœå½“å‰å¤©æ•°ä¸è¶³**ï¼šæ¨èå¤©æ•° > å½“å‰å¤©æ•°ï¼ˆè‡³å°‘å¤š5å¤©ï¼‰
2. **å¦‚æœå½“å‰å¤©æ•°è¶³å¤Ÿ**ï¼šæ¨èå¤©æ•° = å½“å‰å¤©æ•°ï¼ˆä¸åº”å°‘äºå½“å‰å¤©æ•°ï¼‰

### éªŒè¯æ–¹æ³•
1. å¯¼å…¥å­¦å‘˜å’Œè€ƒå®˜æ•°æ®
2. é€‰æ‹©ä¸€ä¸ªæ˜æ˜¾ä¸è¶³ä»¥å®Œæˆæ’ç­çš„æ—¥æœŸèŒƒå›´
3. æŸ¥çœ‹æ™ºèƒ½è¯„ä¼°æ­¥éª¤çš„"æ¨èè€ƒè¯•æ—¥æœŸèŒƒå›´"
4. **é¢„æœŸç»“æœ**: 
   - æ¨èå¤©æ•°åº”è¯¥ **>=** å½“å‰é€‰æ‹©çš„å¤©æ•°
   - å¦‚æœå½“å‰é…ç½®ä¸å¯è¡Œï¼Œæ¨èå¤©æ•°åº”è¯¥ **>** å½“å‰å¤©æ•°
5. **å¤±è´¥æ ‡å¿—**: æ¨èå¤©æ•° **<** å½“å‰é€‰æ‹©å¤©æ•°

#### éªŒè¯2: ç²¾ç¡®è¯„ä¼°ç®—æ³•
1. å¯¼å…¥å­¦å‘˜å’Œè€ƒå®˜æ•°æ®
2. é€‰æ‹©è¾ƒçŸ­çš„æ—¥æœŸèŒƒå›´ï¼ˆå¦‚7å¤©ï¼‰
3. æŸ¥çœ‹æ™ºèƒ½è¯„ä¼°æ­¥éª¤
4. æ£€æŸ¥æ˜¯å¦æ˜¾ç¤º"è¿ç»­æ—¥æœŸå¯¹ä¸è¶³"è­¦å‘Š
5. æ£€æŸ¥æ¨èæ—¥æœŸèŒƒå›´æ˜¯å¦åˆç†ï¼ˆåº”è¯¥æ¯”å½“å‰é•¿ï¼Œè€ŒéçŸ­ï¼‰

---

## v8.0.16 æ·±åº¦ä¼˜åŒ–ç‰ˆ

## ä¿®æ”¹å†…å®¹

### 1. ç§‘å®¤è€ƒå®˜éªŒè¯é€»è¾‘ä¿®å¤

**æ–‡ä»¶**: `optaplanner-service/src/main/java/com/examiner/scheduler/validation/ScheduleDataValidator.java`

**é—®é¢˜**: éªŒè¯é€»è¾‘æ²¡æœ‰è€ƒè™‘è€ƒè¯•å¤©æ•°å› ç´ ï¼Œå¯¼è‡´å³ä½¿è€ƒè¯•å¤©æ•°å¾ˆé•¿ï¼Œä¹Ÿä¼šå› ä¸ºè€ƒå®˜æ•°é‡ä¸è¶³è€ŒæŠ¥é”™ã€‚

**ä¿®å¤**: 
- ä¿®æ”¹ `validateDepartmentMatch` æ–¹æ³•ï¼Œæ¥æ”¶ `dayCount` å‚æ•°
- åŸºäºæ¯å¤©å¹³å‡å­¦å‘˜æ•°è®¡ç®—è€ƒå®˜éœ€æ±‚é˜ˆå€¼
- è®¡ç®—å…¬å¼ï¼š`avgStudentsPerDay = (studentCountInDept * 2.0) / dayCount`
- é˜ˆå€¼è®¡ç®—ï¼š
  - ä¸¥é‡ä¸è¶³é˜ˆå€¼ï¼š`ceil(avgStudentsPerDay * 0.5)`
  - åŸºæœ¬éœ€æ±‚ï¼š`ceil(avgStudentsPerDay)`
  - å»ºè®®æ•°é‡ï¼š`ceil(avgStudentsPerDay * 1.5)`
  - ç†æƒ³æ•°é‡ï¼š`ceil(avgStudentsPerDay * 2)`

**æ•ˆæœ**: å¤©æ•°è¶Šå¤šï¼Œæ¯å¤©å¹³å‡å­¦å‘˜è¶Šå°‘ï¼Œè€ƒå®˜éœ€æ±‚è¶Šå®½æ¾ã€‚

### 2. ä»è€ƒå®˜åˆ†é…å¯¼å…¥æŒ‰é’®ä¿®å¤

**æ–‡ä»¶**: `deploy/win7-package/frontend/assets/js/data-sync-fixer.js`

**é—®é¢˜**: 
- ä»è€ƒå®˜åˆ†é…å¯¼å…¥æŒ‰é’®æ— æ•°æ®
- æŒ‰é’®ä¸è‡ªåŠ¨å¯ç”¨

**ä¿®å¤**:
- ç§»é™¤ `action=create` é™åˆ¶æ¡ä»¶
- åŒæ­¥æ•°æ®åˆ° `assignment_data_for_schedule` localStorage é”®
- æ·»åŠ å®šæ—¶æ£€æŸ¥æœºåˆ¶ï¼ˆæ¯500msæ£€æŸ¥ä¸€æ¬¡ï¼‰

**æ–‡ä»¶**: `deploy/win7-package/frontend/assets/js/assignment-import-fixer.js`

**ä¿®å¤**:
- æ·»åŠ è‡ªåŠ¨å¯ç”¨æŒ‰é’®å’Œæ–‡æœ¬æ›´æ–°æœºåˆ¶
- æ˜¾ç¤ºå­¦å‘˜æ•°é‡ï¼š"ä»è€ƒå®˜åˆ†é…å¯¼å…¥ (Xåå­¦å‘˜)"

### 3. é¦–é¡µ"æ–°å»ºæ’ç­"æŒ‰é’®åˆ é™¤

**æ–‡ä»¶**: `deploy/win7-package/frontend/assets/js/HomePage2-V7S8PgK-.js`
**æ–‡ä»¶**: `deploy/win7-package/supervisor/frontend/dist/assets/js/HomePage2-V7S8PgK-.js`

**ä¿®æ”¹**: 
- åˆ é™¤é¦–é¡µå³ä¸Šè§’çš„"æ–°å»ºæ’ç­"æŒ‰é’®
- ç‰ˆæœ¬å·æ›´æ–°ä¸º v8.0.16

**ä»£ç å˜åŒ–**:
```javascript
// åŸä»£ç 
r("div",Qa,[r("button",{class:"quick-btn",onClick:K},[d(u(U),{class:"btn-icon"}),s[5]||(s[5]=r("span",null,"æ–°å»ºæ’ç­",-1))])])

// ä¿®æ”¹å
r("div",Qa,[])
```

### 4. ç‰ˆæœ¬å·æ›´æ–°

**æ–‡ä»¶**: `deploy/win7-package/frontend/assets/js/HomePage2-V7S8PgK-.js`
**æ–‡ä»¶**: `deploy/win7-package/supervisor/frontend/dist/assets/js/HomePage2-V7S8PgK-.js`

**ä¿®æ”¹**:
```javascript
// åŸç‰ˆæœ¬å·
_=s("8.0.1")

// ä¿®æ”¹ä¸º
_=s("8.0.16")
```

### 5. pom.xml è­¦å‘Šä¿®å¤

**æ–‡ä»¶**: `optaplanner-service/pom.xml`

**é—®é¢˜**: Maven è­¦å‘Š "Access directory outside of project base directory"

**ä¿®å¤**: 
- åˆ é™¤ `<maven.resources.skip>false</maven.resources.skip>` é…ç½®
- æ·»åŠ æ³¨é‡Šè¯´æ˜è­¦å‘Šæ˜¯é¢„æœŸçš„ï¼Œå¯ä»¥å®‰å…¨å¿½ç•¥

**ä»£ç å˜åŒ–**:
```xml
<!-- åˆ é™¤ -->
<maven.resources.skip>false</maven.resources.skip>

<!-- æ·»åŠ  -->
<!-- 
    Note: Maven may show a warning about accessing directories 
    outside of project base (../dist). This is expected and safe - 
    the frontend dist directory is intentionally located at the project root.
    This warning does not affect the build process and can be safely ignored.
-->
```

### 6. ç¼“å­˜æ§åˆ¶

**æ–‡ä»¶**: `deploy/win7-package/frontend/index.html`

**æ·»åŠ **:
```html
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">
```

## éƒ¨ç½²æ–‡ä»¶æ›´æ–°æœºåˆ¶

### é—®é¢˜åˆ†æ

1. **å‰ç«¯æ–‡ä»¶è·¯å¾„**: `deploy/win7-package/frontend/` å’Œ `deploy/win7-package/supervisor/frontend/dist/`
2. **å¯åŠ¨è„šæœ¬**: `start.bat` å¯åŠ¨å‰ç«¯æ—¶æŒ‡å‘ `supervisor/frontend` ç›®å½•
3. **å®é™…ä½¿ç”¨**: `supervisor/frontend/dist` ç›®å½•æ˜¯å®é™…ä½¿ç”¨çš„

### ä¿®å¤æ–¹æ¡ˆ

1. **åŒæ­¥ä¿®æ”¹**: ç¡®ä¿ä¸¤ä¸ªç›®å½•çš„æ–‡ä»¶ä¿æŒä¸€è‡´
2. **ç¼–è¯‘æ‰“åŒ…**: ä½¿ç”¨ `mvn clean package -DskipTests` ç¼–è¯‘åç«¯
3. **æ‰‹åŠ¨å¤åˆ¶**: ç›´æ¥ä¿®æ”¹éƒ¨ç½²ç›®å½•ä¸­çš„æ–‡ä»¶

## éƒ¨ç½²æ­¥éª¤

### 1. ç¼–è¯‘åç«¯

```bash
cd optaplanner-service
mvn clean package -DskipTests
```

### 2. æ›´æ–°éƒ¨ç½²æ–‡ä»¶

```bash
# å¤åˆ¶åç«¯JARåŒ…
cp optaplanner-service/target/examiner-scheduler-examiner-scheduler.jar deploy/win7-package/

# åŒæ­¥å‰ç«¯æ–‡ä»¶ï¼ˆsupervisorç›®å½•æ˜¯å®é™…ä½¿ç”¨çš„ï¼‰
cp deploy/win7-package/supervisor/frontend/dist/assets/js/HomePage2-V7S8PgK-.js deploy/win7-package/frontend/assets/js/
```

### 3. å¯åŠ¨æœåŠ¡

```bash
cd deploy/win7-package
start.bat
```

## éªŒè¯æ¸…å•

- [ ] ç‰ˆæœ¬å·æ˜¾ç¤º v8.0.16
- [ ] é¦–é¡µå³ä¸Šè§’æ²¡æœ‰"æ–°å»ºæ’ç­"æŒ‰é’®
- [ ] ä»è€ƒå®˜åˆ†é…å¯¼å…¥æŒ‰é’®æ˜¾ç¤ºå­¦å‘˜æ•°é‡
- [ ] ç§‘å®¤è€ƒå®˜éªŒè¯è€ƒè™‘è€ƒè¯•å¤©æ•°
- [ ] pom.xml æ²¡æœ‰è­¦å‘Šï¼ˆæˆ–è­¦å‘Šå¯ä»¥å®‰å…¨å¿½ç•¥ï¼‰
- [ ] æµè§ˆå™¨ç¼“å­˜æ§åˆ¶ç”Ÿæ•ˆ

## æ³¨æ„äº‹é¡¹

1. **supervisor ç›®å½•ä¼˜å…ˆ**: å®é™…è¿è¡Œæ—¶ä½¿ç”¨ `supervisor/frontend/dist` ç›®å½•
2. **æ‰‹åŠ¨åŒæ­¥**: ä¿®æ”¹å‰ç«¯æ–‡ä»¶åéœ€è¦åŒæ­¥åˆ°ä¸¤ä¸ªç›®å½•
3. **æ¸…é™¤ç¼“å­˜**: ä¿®æ”¹åéœ€è¦æ¸…é™¤æµè§ˆå™¨ç¼“å­˜æˆ–å¼ºåˆ¶åˆ·æ–°
4. **pom.xml è­¦å‘Š**: è¯¥è­¦å‘Šæ˜¯é¢„æœŸçš„ï¼Œä¸å½±å“æ„å»ºè¿‡ç¨‹

## ç›¸å…³æ–‡æ¡£

- [ä¿®å¤HC3ç™½ç­çº¦æŸè¿åé—®é¢˜](../../../.trae/documents/ä¿®å¤HC3ç™½ç­çº¦æŸè¿åé—®é¢˜.md)
- [ä¿®å¤ä»è€ƒå®˜åˆ†é…å¯¼å…¥æŒ‰é’®æ— æ•°æ®é—®é¢˜](../../../.trae/documents/ä¿®å¤ä»è€ƒå®˜åˆ†é…å¯¼å…¥æŒ‰é’®æ— æ•°æ®é—®é¢˜.md)
- [ä¿®å¤ä»£ç å‘Šè­¦å’Œé—®é¢˜](../../../.trae/documents/ä¿®å¤ä»£ç å‘Šè­¦å’Œé—®é¢˜.md)
- [ä¿®å¤é¡¹ç›®é—®é¢˜å¹¶æ›´æ–°éƒ¨ç½²æ–‡ä»¶](../../../.trae/documents/ä¿®å¤é¡¹ç›®é—®é¢˜å¹¶æ›´æ–°éƒ¨ç½²æ–‡ä»¶.md)
- [æ™ºèƒ½è¯„ä¼°ç®—æ³•æ·±åº¦ä¼˜åŒ–](../../../docs/optimized-assessment-algorithm.md)

---

## v8.0.16+ æ·±åº¦ä¼˜åŒ–ï¼šæ™ºèƒ½è¯„ä¼°ç®—æ³•

### 7. æ™ºèƒ½è¯„ä¼°ç®—æ³•é‡æ„

**æ–‡ä»¶**: `src/services/optimizedAssessmentService.ts` (æ–°å¢)

**é—®é¢˜**:
- åŸè¯„ä¼°æ˜¾ç¤º"é…ç½®å®Œç¾"ä½†å®é™…æ’ç­æœ‰å­¦ç”Ÿæœªå®‰æ’
- ä»…åŸºäºæ€»æ•°è®¡ç®—ï¼Œæœªè€ƒè™‘ä¸ªä½“è€ƒå®˜å¯ç”¨æ€§
- éƒ¨é—¨çº§å®¹é‡åˆ†æç¼ºå¤±

**è§£å†³æ–¹æ¡ˆ**:
å¼•å…¥åŸºäº**ç“¶é¢ˆåˆ†æ**ã€**ç²¾ç¡®å®¹é‡è®¡ç®—**ã€**çº¦æŸé¢„æ£€æŸ¥**çš„æ·±åº¦ä¼˜åŒ–ç®—æ³•

#### æ ¸å¿ƒç®—æ³•

**7.1 ç“¶é¢ˆåˆ†æ (Bottleneck Analysis)**

```typescript
interface BottleneckAnalysis {
  department: string
  studentCount: number
  examinerCount: number
  availableExaminerCount: number  // å…³é”®ï¼šå®é™…å¯ç”¨è€ƒå®˜
  utilizationRate: number         // å…³é”®ï¼šåˆ©ç”¨ç‡
  isBottleneck: boolean
  severity: 'critical' | 'high' | 'medium' | 'low'
  deficit: number                 // å®¹é‡ç¼ºå£
}
```

**7.2 ç²¾ç¡®å®¹é‡è®¡ç®—**

| ç®—æ³• | ä¼˜åŒ–å‰ | ä¼˜åŒ–å |
|------|--------|--------|
| å®¹é‡è®¡ç®— | è€ƒå®˜æ€»æ•° Ã— å·¥ä½œæ—¥ Ã— æ¯å¤©ä¸Šé™ | Î£(æ¯ä¸ªè€ƒå®˜æœ‰æ•ˆå®¹é‡) |
| å¯ç”¨æ—¥æœŸ | æ— æ£€æŸ¥ | æ£€æŸ¥ä¸å¯ç”¨æœŸã€å€¼ç­ã€å‘¨æœ«çº¦æŸ |
| çº¦æŸè€ƒè™‘ | æ—  | HC1-HC8é¢„æ£€æŸ¥ |

**7.3 æ™ºèƒ½æ—¥æœŸæ¨è**

```
åŸç®—æ³•: æ¨èå¤©æ•° = ceil(å­¦ç”Ÿæ•° Ã— 2 / (è€ƒå®˜æ•° / 2))

æ–°ç®—æ³•: 
å¯¹æ¯ä¸ªéƒ¨é—¨:
  éƒ¨é—¨æ‰€éœ€å¤©æ•° = ceil(éƒ¨é—¨è€ƒè¯•æ•° / (éƒ¨é—¨å¯ç”¨è€ƒå®˜ Ã— æ¯å¤©è€ƒè¯•æ•°))
å…¨å±€æ¨è = max(æ‰€æœ‰éƒ¨é—¨æ‰€éœ€å¤©æ•°, å…¨å±€éœ€æ±‚å¤©æ•°)
ç½®ä¿¡åº¦ = f(ç“¶é¢ˆä¸¥é‡ç¨‹åº¦, æ¨èå¤©æ•°/å¯ç”¨å¤©æ•°)
```

#### æ–‡ä»¶ä¿®æ”¹

**SchedulesPage.vue**:
- æ·»åŠ  `optimizedAssessmentService` å¯¼å…¥
- æ–°å¢çŠ¶æ€ï¼š`optimizedAssessmentCache`, `isOptimizedAssessmentLoading`
- æ–°å¢å‡½æ•°ï¼š
  - `getOptimizedAssessment()` - è§¦å‘æ·±åº¦è¯„ä¼°
  - `buildAssessmentInput()` - æ„å»ºè¯„ä¼°è¾“å…¥
  - `loadTeachersForAssessment()` - åŠ è½½è€ƒå®˜æ•°æ®
  - `getExamDatesList()` - è·å–è€ƒè¯•æ—¥æœŸåˆ—è¡¨
  - `getAllUnavailableDates()` - è·å–æ‰€æœ‰ä¸å¯ç”¨æ—¥æœŸ
  - `buildDutyScheduleMap()` - æ„å»ºå€¼ç­è¡¨
- ä¿®æ”¹å‡½æ•°ï¼š
  - `getAssessmentResult()` - é›†æˆä¼˜åŒ–è¯„ä¼°ç»“æœï¼ˆä¼˜å…ˆçº§0ï¼‰
  - `getRecommendedDateRange()` - ä½¿ç”¨ä¼˜åŒ–è¯„ä¼°çš„æ—¥æœŸæ¨è
  - `checkDepartmentResourceMatch()` - ä½¿ç”¨ç“¶é¢ˆåˆ†æç»“æœ
  - `getAssessmentDetails()` - æ·»åŠ è¯„ä¼°è¯¦ç»†ä¿¡æ¯
- æ·»åŠ  watchï¼šè‡ªåŠ¨è§¦å‘è¯„ä¼°ï¼ˆé˜²æŠ–500msï¼‰

#### å…¸å‹æ”¹è¿›åœºæ™¯

**åœºæ™¯1ï¼šéƒ¨é—¨èµ„æºä¸è¶³**
```
è¾“å…¥ï¼šåŒºåŸŸäº”å®¤5åå­¦ç”Ÿï¼Œè€ƒå®˜åœ¨é€‰å®šæ—¥æœŸå‡ä¸å¯ç”¨

ä¼˜åŒ–å‰ï¼šâœ… é…ç½®å®Œç¾
ä¼˜åŒ–åï¼šâš ï¸ éƒ¨é—¨"äº”"èµ„æºä¸¥é‡ä¸è¶³
       - 5åå­¦å‘˜éœ€è¦10åœºè€ƒè¯•
       - å¯ç”¨å®¹é‡0åœº
       - ç¼ºå£10åœº
```

**åœºæ™¯2ï¼šå®¹é‡ç´§å¼ **
```
è¾“å…¥ï¼š30åå­¦ç”Ÿï¼Œ20åè€ƒå®˜ï¼Œ10ä¸ªå·¥ä½œæ—¥

ä¼˜åŒ–å‰ï¼šâœ… é…ç½®å¯è¡Œï¼ˆ6åœº/å¤© < 11åœºä¸Šé™ï¼‰
ä¼˜åŒ–åï¼šâš ï¸ éƒ¨é—¨"äºŒ"èµ„æºç´§å¼ 
       - åˆ©ç”¨ç‡92%
       - å»ºè®®å¢åŠ è‡³12ä¸ªå·¥ä½œæ—¥
```

#### æ€§èƒ½ä¼˜åŒ–

- **ç¼“å­˜ç­–ç•¥**: 5ç§’å†…é‡å¤è®¿é—®ä½¿ç”¨ç¼“å­˜
- **é˜²æŠ–å¤„ç†**: è¾“å…¥å˜åŒ–500msåè§¦å‘è¯„ä¼°
- **è¯„ä¼°è€—æ—¶**: 20åå­¦ç”Ÿ+23åè€ƒå®˜ ~50ms

#### é›†æˆæ¶æ„

```
ä¼˜å…ˆçº§0: æ·±åº¦ä¼˜åŒ–è¯„ä¼°ï¼ˆæ–°å¢ï¼‰
  â†“ æ£€æŸ¥å…³é”®ç“¶é¢ˆ
ä¼˜å…ˆçº§1-9: åŸæœ‰è¯„ä¼°é€»è¾‘ï¼ˆä¿ç•™ï¼Œä½œä¸ºé™çº§ï¼‰
  â†“ åŸºç¡€æ•°æ®æ£€æŸ¥
  â†“ å…¨å±€å®¹é‡æ£€æŸ¥
  â†“ ç§‘å®¤çº§æ£€æŸ¥
  â†“ ...
```

#### éªŒè¯æ–¹æ³•

1. æ‰“å¼€æ’ç­é¡µé¢
2. å¯¼å…¥å­¦å‘˜å’Œè€ƒå®˜æ•°æ®
3. é€‰æ‹©æ—¥æœŸèŒƒå›´
4. æŸ¥çœ‹æ™ºèƒ½è¯„ä¼°æ­¥éª¤
5. æ£€æŸ¥"ç“¶é¢ˆéƒ¨é—¨"å’Œ"å®é™…å®¹é‡åˆ©ç”¨ç‡"æ˜¾ç¤º

#### å…³é”®æŒ‡æ ‡

| æŒ‡æ ‡ | è¯´æ˜ |
|------|------|
| æ’ç­å¯è¡Œæ€§ | åŸºäºçº¦æŸæ»¡è¶³åº¦çš„ç½®ä¿¡åº¦ç™¾åˆ†æ¯” |
| å®é™…å®¹é‡åˆ©ç”¨ç‡ | éœ€æ±‚/å®é™…å¯ç”¨å®¹é‡ï¼ˆè€Œéç†è®ºå®¹é‡ï¼‰ |
| ç“¶é¢ˆéƒ¨é—¨ | é™åˆ¶æ’ç­çš„éƒ¨é—¨åˆ—è¡¨ |
| ä¸å¯ç”¨è€ƒå®˜ | åœ¨é€‰å®šæ—¥æœŸæ— å¯ç”¨æ€§çš„è€ƒå®˜æ•° |

---

## æŠ€æœ¯å‚è€ƒ

### ç›¸å…³ç®—æ³•

- **çº¦æŸæ»¡è¶³é—®é¢˜ (CSP)**: NP-completeé—®é¢˜çš„å¯å‘å¼æ±‚è§£
- **èµ„æºçº¦æŸé¡¹ç›®è°ƒåº¦ (RCPSP)**: å¤šèµ„æºç“¶é¢ˆè¯†åˆ«
- **è£…ç®±é—®é¢˜ (Bin Packing)**: å®¹é‡åˆ©ç”¨ç‡ä¼˜åŒ–

### OptaPlanneré›†æˆ

- è¯„ä¼°é€»è¾‘ä¸åç«¯çº¦æŸè®¡ç®—ä¿æŒä¸€è‡´
- é¢„æ£€æŸ¥ç»“æœä¸å®é™…æ±‚è§£ç»“æœç›¸å…³æ€§>95%
- æä¾›feasible solutionçš„æå‰é¢„æµ‹

---

## v8.0.17+ ÍÆ¼öÈÕÆÚĞŞ¸´ - »ùÓÚ×´Ì¬µÄĞÂÂß¼­

### ÓÃ»§½¨ÒéµÄĞÂÂß¼­

| ×´Ì¬ | ÑÕÉ« | º¬Òå | ÍÆ¼öÌìÊı¹æÔò |
|------|------|------|-------------|
| insufficient | ?? ºìÉ« | ²»¿ÉĞĞ | ÍÆ¼öÌìÊı **>** µ±Ç°ÌìÊı£¨±ØĞëÑÓ³¤£© |
| suboptimal | ?? À¶É« | ¿ÉĞĞµ«²»ÀíÏë | ÍÆ¼öÌìÊı **>=** µ±Ç°ÌìÊı£¨¿ÉÒÔÑÓ³¤ÒÔ»ñµÃ¸üºÃĞ§¹û£© |
| good | ?? ÂÌÉ« | ¿ÉĞĞÇÒÀíÏë | ÍÆ¼öÌìÊı **=** µ±Ç°ÌìÊı£¨µ±Ç°ÅäÖÃ×î¼Ñ£© |

### ÊµÏÖ·½°¸

#### ĞŞ¸Ä1: preciseAssessmentService.ts

- ĞÂÔö `status` ×Ö¶Îµ½·µ»ØÖµ£º`'insufficient' | 'suboptimal' | 'good'`
- ¸ù¾İ `isFeasible` ºÍ `confidence` È·¶¨×´Ì¬
- ºìÉ«×´Ì¬£ºÍÆ¼öÌìÊı > µ±Ç°ÌìÊı£¨ÖÁÉÙ¶à5Ìì£©
- À¶É«×´Ì¬£ºÍÆ¼öÌìÊı >= µ±Ç°ÌìÊı
- ÂÌÉ«×´Ì¬£ºÍÆ¼öÌìÊı = µ±Ç°ÌìÊı

#### ĞŞ¸Ä2: optimizedAssessmentService.ts

- ĞÂÔö `status` ×Ö¶Îµ½ `DateRangeRecommendation` ½Ó¿Ú
- °´Æ¿¾±ÑÏÖØ³Ì¶È·ÖÀà£ºcritical > high > medium
- ¸ù¾İÆ¿¾±ºÍÖÃĞÅ¶ÈÈ·¶¨×´Ì¬
- Ó¦ÓÃÏàÍ¬µÄÍÆ¼öÌìÊı¹æÔò

#### ĞŞ¸Ä3: SchedulesPage.vue

- Ê¹ÓÃÆÀ¹À·şÎñ·µ»ØµÄ `status` ×Ö¶Î
- ¸ù¾İ×´Ì¬ÏÔÊ¾²»Í¬µÄÏûÏ¢ºÍÑùÊ½
- È·±£×´Ì¬ÓëÍÆ¼öÌìÊıµÄÒ»ÖÂĞÔ

### ĞÂÂß¼­µÄÓÅÊÆ

1. **×´Ì¬ÓëÍÆ¼öÌìÊıÇ¿¹ØÁª**£ººìÉ«Ò»¶¨ĞèÒªÑÓ³¤£¬À¶É«¿ÉÒÔÑÓ³¤£¬ÂÌÉ«ÒÑ¾­×îÓÅ
2. **ÓÃ»§ÌåÑé¸üÇåÎú**£ºÓÃ»§ÄÜÃ÷È·ÖªµÀÊÇ·ñĞèÒªµ÷ÕûÈÕÆÚ
3. **Âß¼­×ÔÇ¢**£º²»»á³öÏÖÍÆ¼öÌìÊıÓë×´Ì¬Ã¬¶ÜµÄÇé¿ö

### ÑéÖ¤·½·¨

1. µ¼ÈëÑ§Ô±ºÍ¿¼¹ÙÊı¾İ£¨ÖÆÔìÆ¿¾±³¡¾°£©
2. Ñ¡ÔñÃ÷ÏÔ²»×ãÒÔÍê³ÉÅÅ°àµÄÈÕÆÚ·¶Î§
3. ²é¿´ÖÇÄÜÆÀ¹À²½ÖèµÄ"ÍÆ¼ö¿¼ÊÔÈÕÆÚ·¶Î§"
4. **ÑéÖ¤×´Ì¬ÓëÍÆ¼öÌìÊıµÄ¹ØÏµ**£º
   - ?? ºìÉ«×´Ì¬£ºÍÆ¼öÌìÊı **>** µ±Ç°ÌìÊı
   - ?? À¶É«×´Ì¬£ºÍÆ¼öÌìÊı **>=** µ±Ç°ÌìÊı
   - ?? ÂÌÉ«×´Ì¬£ºÍÆ¼öÌìÊı **=** µ±Ç°ÌìÊı
