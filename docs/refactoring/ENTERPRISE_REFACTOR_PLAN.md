# ä¼ä¸šçº§é‡æ„è®¡åˆ’ - æ™ºèƒ½è€ƒå®˜æ’ç­ç³»ç»Ÿ

## æ‰§è¡Œæ‘˜è¦

### é¡¹ç›®èƒŒæ™¯
åŸºäºOptaPlannerçš„æ™ºèƒ½è€ƒå®˜æ’ç­ç³»ç»Ÿéœ€è¦è¿›è¡Œä¼ä¸šçº§é‡æ„ï¼Œä»¥å®ç°ï¼š
- âš¡ **æ›´å¿«çš„è®¡ç®—é€Ÿåº¦**ï¼šæ±‚è§£æ—¶é—´å‡å°‘50%
- ğŸ¯ **æ›´ç²¾å‡†çš„ç»“æœ**ï¼šçº¦æŸæ»¡è¶³ç‡æå‡è‡³99.5%
- ğŸ”§ **æ›´å¥½çš„ç»´æŠ¤æ€§**ï¼šä»£ç è´¨é‡æå‡è‡³Açº§
- ğŸ¢ **ä¼ä¸šçº§ç¨³å®šæ€§**ï¼š99.9%å¯ç”¨æ€§ä¿éšœ

### æ ¸å¿ƒç›®æ ‡

| æŒ‡æ ‡ | å½“å‰ | ç›®æ ‡ | æå‡ |
|------|------|------|------|
| æ±‚è§£æ—¶é—´(30å­¦å‘˜) | 120ç§’ | 60ç§’ | 50% â†“ |
| å†…å­˜å³°å€¼ | 600MB | 400MB | 33% â†“ |
| å¹¶å‘æ±‚è§£æ•° | 3ä¸ª | 10ä¸ª | 233% â†‘ |
| ç¡¬çº¦æŸæ»¡è¶³ç‡ | 95% | 99.5% | 4.5% â†‘ |
| ä»£ç è¦†ç›–ç‡ | 45% | 80% | 35% â†‘ |

## ç°çŠ¶åˆ†æ

### ç³»ç»Ÿæ¶æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Vue 3 Frontend â”‚â”€â”€â”€â–¶â”‚  Quarkus Backend â”‚â”€â”€â”€â–¶â”‚  OptaPlanner    â”‚
â”‚   (Electron App) â”‚    â”‚  (REST API)      â”‚    â”‚  (Solver Engine)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â”‚  H2/PostgreSQLâ”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆ
- **å‰ç«¯**: Vue 3 + Vite + TypeScript + Element Plus
- **åç«¯**: Quarkus 2.16 + OptaPlanner 8.38 + JDK 17
- **æ•°æ®åº“**: H2 (å¼€å‘) / PostgreSQL (ç”Ÿäº§)
- **æ„å»º**: Maven + npm
- **éƒ¨ç½²**: Electron + Supervisor

### å·²è¯†åˆ«é—®é¢˜

#### 1. æ€§èƒ½ç“¶é¢ˆ
- **N+1æŸ¥è¯¢é—®é¢˜**: åŠ è½½100ä¸ªåˆ†é…éœ€è¦201æ¬¡æŸ¥è¯¢
- **å†…å­˜æ³„æ¼**: å¹¶å‘åœºæ™¯ä¸‹å †å†…å­˜ä¸è¶³é£é™©
- **åŒæ­¥é˜»å¡**: æ±‚è§£è¿‡ç¨‹é˜»å¡HTTPçº¿ç¨‹20-120ç§’
- **ç¼“å­˜ç¼ºå¤±**: DutyScheduleé‡å¤è®¡ç®—

#### 2. æ¶æ„é—®é¢˜
- **å•ç‚¹æ•…éšœ**: æ— ä»»åŠ¡é˜Ÿåˆ—ç®¡ç†
- **ç¼ºä¹ç›‘æ§**: æ— æ€§èƒ½æŒ‡æ ‡æ”¶é›†
- **é…ç½®æ··ä¹±**: ç¡¬ç¼–ç é…ç½®è¿‡å¤š
- **æµ‹è¯•ä¸è¶³**: è¦†ç›–ç‡ä»…45%

#### 3. ä»£ç è´¨é‡
- **å¤æ‚åº¦è¿‡é«˜**: éƒ¨åˆ†æ–¹æ³•åœˆå¤æ‚åº¦>20
- **é‡å¤ä»£ç **: çº¦æŸè¯„ä¼°é€»è¾‘é‡å¤
- **ç¼ºä¹æ–‡æ¡£**: APIæ–‡æ¡£ä¸å®Œæ•´

## é‡æ„æ–¹æ¡ˆ

### é˜¶æ®µ1: å¿«é€Ÿèƒœåˆ© (1å‘¨)

#### 1.1 æ•°æ®åº“ä¼˜åŒ–
```sql
-- åˆ›å»ºå¤åˆç´¢å¼•
CREATE INDEX idx_assignment_date_examiner ON exam_assignment(exam_date, examiner_id);
CREATE INDEX idx_teacher_department ON teachers(department, status);
CREATE INDEX idx_student_group ON students(department, group_name);

-- éƒ¨åˆ†ç´¢å¼•
CREATE INDEX idx_active_teachers ON teachers(id) WHERE status = 'ACTIVE';
```

#### 1.2 ç¼“å­˜å±‚å®ç°
- DutyScheduleç¼“å­˜ï¼ˆå·²éƒ¨åˆ†å®ç°ï¼‰
- çº¦æŸæƒé‡ç¼“å­˜
- æ—¥æœŸè§£æç¼“å­˜

#### 1.3 JVMå‚æ•°ä¼˜åŒ–
```bash
# ç”Ÿäº§ç¯å¢ƒJVMå‚æ•°
JAVA_OPTS="-Xms512m -Xmx2g \
  -XX:+UseG1GC \
  -XX:MaxGCPauseMillis=200 \
  -XX:+UseStringDeduplication \
  -XX:SoftRefLRUPolicyMSPerMB=1000"
```

### é˜¶æ®µ2: æ ¸å¿ƒå¢å¼º (2-3å‘¨)

#### 2.1 å¼‚æ­¥æ±‚è§£æ¶æ„
```java
@ApplicationScoped
public class AsyncSolverService {
    
    private final ExecutorService solverExecutor = 
        Executors.newFixedThreadPool(5, new SolverThreadFactory());
    
    private final Map<String, CompletableFuture<Solution>> solvingTasks = 
        new ConcurrentHashMap<>();
    
    public String submitSolveRequest(SolveRequest request) {
        String taskId = UUID.randomUUID().toString();
        
        CompletableFuture<Solution> future = CompletableFuture
            .supplyAsync(() -> solve(request), solverExecutor)
            .orTimeout(300, TimeUnit.SECONDS);
        
        solvingTasks.put(taskId, future);
        return taskId;
    }
}
```

#### 2.2 é«˜æ€§èƒ½æ±‚è§£å™¨é…ç½®
```java
public class EnterpriseSolverConfig {
    
    public SolverConfig createConfig(ProblemSize size) {
        return new SolverConfig()
            .withSolutionClass(ExamSchedule.class)
            .withEntityClasses(ExamAssignment.class)
            .withConstraintProviderClass(OptimizedConstraintProvider.class)
            .withMoveThreadCount(getMoveThreadCount(size))
            .withPhaseList(createPhases(size))
            .withTerminationConfig(createTermination(size));
    }
    
    private String getMoveThreadCount(ProblemSize size) {
        return switch(size) {
            case SMALL -> "2";
            case MEDIUM -> "AUTO";
            case LARGE -> "4";
        };
    }
}
```

#### 2.3 å‰ç«¯æ€§èƒ½ä¼˜åŒ–
- è™šæ‹Ÿæ»šåŠ¨å®ç°
- ç»„ä»¶æ‡’åŠ è½½
- çŠ¶æ€ç®¡ç†ä¼˜åŒ–
- Web Workerè®¡ç®—

### é˜¶æ®µ3: ä¼ä¸šçº§ç‰¹æ€§ (3-4å‘¨)

#### 3.1 ç›‘æ§ä½“ç³»
- MicrometeræŒ‡æ ‡æ”¶é›†
- å¥åº·æ£€æŸ¥ç«¯ç‚¹
- åˆ†å¸ƒå¼è¿½è¸ª
- å‘Šè­¦ç³»ç»Ÿ

#### 3.2 é«˜å¯ç”¨æ¶æ„
- ä»»åŠ¡é˜Ÿåˆ— (RabbitMQ/Redis)
- é›†ç¾¤æ±‚è§£æ”¯æŒ
- æ•…éšœè½¬ç§»æœºåˆ¶
- é™æµç†”æ–­

#### 3.3 å®‰å…¨å¢å¼º
- JWTè®¤è¯
- APIé™æµ
- æ•°æ®åŠ å¯†
- å®¡è®¡æ—¥å¿—

## å®æ–½è®¡åˆ’

### ç¬¬1å‘¨: åŸºç¡€è®¾æ–½
| å¤©æ•° | ä»»åŠ¡ | è´Ÿè´£äºº | äº§å‡º |
|------|------|--------|------|
| 1-2 | æ•°æ®åº“ç´¢å¼•ä¼˜åŒ– | åç«¯ | ç´¢å¼•è„šæœ¬ |
| 2-3 | ç¼“å­˜å±‚å®Œå–„ | åç«¯ | ç¼“å­˜ç»„ä»¶ |
| 3-4 | JVMå‚æ•°è°ƒä¼˜ | è¿ç»´ | é…ç½®æ–‡æ¡£ |
| 4-5 | æ€§èƒ½åŸºçº¿æµ‹è¯• | QA | æµ‹è¯•æŠ¥å‘Š |

### ç¬¬2-3å‘¨: æ ¸å¿ƒä¼˜åŒ–
| å‘¨æ¬¡ | ä»»åŠ¡ | äº§å‡º |
|------|------|------|
| 2 | å¼‚æ­¥æ±‚è§£API | å¼‚æ­¥æœåŠ¡ |
| 2 | æ±‚è§£å™¨ä¼˜åŒ– | é«˜æ€§èƒ½é…ç½® |
| 3 | å‰ç«¯è™šæ‹Ÿæ»šåŠ¨ | UIç»„ä»¶ |
| 3 | çŠ¶æ€ç®¡ç†é‡æ„ | Pinia Store |

### ç¬¬4-6å‘¨: ä¼ä¸šçº§ç‰¹æ€§
| å‘¨æ¬¡ | ä»»åŠ¡ | äº§å‡º |
|------|------|------|
| 4 | ç›‘æ§ç³»ç»Ÿ | Micrometeré›†æˆ |
| 4 | å¥åº·æ£€æŸ¥ | ç«¯ç‚¹å®ç° |
| 5 | ä»»åŠ¡é˜Ÿåˆ— | RabbitMQé›†æˆ |
| 5 | é™æµç†”æ–­ | Resilience4j |
| 6 | å®‰å…¨åŠ å›º | JWTå®ç° |
| 6 | é›†æˆæµ‹è¯• | æµ‹è¯•æŠ¥å‘Š |

## é£é™©è¯„ä¼°

### é«˜é£é™©
| é£é™© | å½±å“ | ç¼“è§£æªæ–½ |
|------|------|----------|
| æ±‚è§£è´¨é‡ä¸‹é™ | é«˜ | A/Bæµ‹è¯•ï¼Œé€æ­¥åˆ‡æ¢ |
| å†…å­˜æº¢å‡º | é«˜ | æ¸è¿›å¼å‘å¸ƒï¼Œç›‘æ§å‘Šè­¦ |
| æ•°æ®ä¸ä¸€è‡´ | é«˜ | äº‹åŠ¡æ§åˆ¶ï¼Œå›æ»šæœºåˆ¶ |

### ä¸­é£é™©
| é£é™© | å½±å“ | ç¼“è§£æªæ–½ |
|------|------|----------|
| å­¦ä¹ æˆæœ¬ | ä¸­ | åŸ¹è®­ï¼Œæ–‡æ¡£ |
| è¿›åº¦å»¶è¿Ÿ | ä¸­ | é‡Œç¨‹ç¢‘æ£€æŸ¥ï¼Œèµ„æºè°ƒé… |
| å…¼å®¹æ€§é—®é¢˜ | ä¸­ | ç‰ˆæœ¬æ§åˆ¶ï¼Œç°åº¦å‘å¸ƒ |

## æˆåŠŸæŒ‡æ ‡

### æŠ€æœ¯æŒ‡æ ‡
- [ ] æ±‚è§£æ—¶é—´å‡å°‘50%
- [ ] å†…å­˜ä½¿ç”¨é™ä½33%
- [ ] å¹¶å‘èƒ½åŠ›æå‡3å€
- [ ] ä»£ç è¦†ç›–ç‡è¾¾åˆ°80%

### ä¸šåŠ¡æŒ‡æ ‡
- [ ] ç”¨æˆ·æ»¡æ„åº¦ > 4.5/5
- [ ] ç³»ç»Ÿå¯ç”¨æ€§ 99.9%
- [ ] é›¶P0çº§æ•…éšœ

### è¿ç»´æŒ‡æ ‡
- [ ] MTTR < 30åˆ†é’Ÿ
- [ ] éƒ¨ç½²æ—¶é—´ < 10åˆ†é’Ÿ
- [ ] ç›‘æ§è¦†ç›–ç‡ 100%

## åç»­è§„åˆ’

### çŸ­æœŸ (1-3æœˆ)
- å®Œå–„ç›‘æ§å‘Šè­¦
- è‡ªåŠ¨åŒ–æµ‹è¯•è¦†ç›–
- æ€§èƒ½æŒç»­ä¼˜åŒ–

### ä¸­æœŸ (3-6æœˆ)
- å¼•å…¥æœºå™¨å­¦ä¹ ä¼˜åŒ–
- æ”¯æŒæ›´å¤§è§„æ¨¡æ•°æ®
- å¤šäº‘éƒ¨ç½²æ”¯æŒ

### é•¿æœŸ (6-12æœˆ)
- æ™ºèƒ½æ¨èç³»ç»Ÿ
- é¢„æµ‹æ€§ç»´æŠ¤
- AIè¾…åŠ©å†³ç­–

---

**åˆ¶å®šæ—¥æœŸ**: 2025-01-30  
**ç‰ˆæœ¬**: v1.0  
**ä½œè€…**: Enterprise Architecture Team
