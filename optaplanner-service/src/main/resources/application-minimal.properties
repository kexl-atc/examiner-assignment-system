# ====================================================
# 超低配置环境专用配置（极限优化）
# 适用于: 2GB 内存 + 双核 CPU
# 警告：仅在极低配置环境使用！
# ====================================================

# 继承低配置设置
%minimal.quarkus.config.profile.parent=low-memory

# 应用配置
quarkus.application.name=examiner-scheduler-minimal
quarkus.application.version=3.1.2-minimal

# ==================== HTTP 服务器（极限优化） ====================
# IO线程: 1（极限）
quarkus.http.io-threads=1
# 工作线程: 2（极限）
quarkus.http.worker-threads=2

# 更严格的限制
# 最大请求体 3MB
quarkus.http.limits.max-body-size=3M
# 最大头部 4KB
quarkus.http.limits.max-header-size=4K

# ==================== 日志（最小化） ====================
# 只记录错误
quarkus.log.level=ERROR
quarkus.log.console.level=ERROR
quarkus.log.console.format=%d{HH:mm:ss} %s%e%n

# ==================== 数据库（极限优化） ====================
# 最大连接数: 3
quarkus.datasource.jdbc.max-size=3
# 最小连接数: 1
quarkus.datasource.jdbc.min-size=1

# ==================== 线程池（极限优化） ====================
# 核心线程: 1
quarkus.thread-pool.core-threads=1
# 最大线程: 4
quarkus.thread-pool.max-threads=4
# 队列大小: 50
quarkus.thread-pool.queue-size=50

# ==================== 禁用所有非必要功能 ====================
# 禁用数据源健康检查
quarkus.datasource.health.enabled=false
# 禁用调度器
quarkus.scheduler.enabled=false
# 禁用控制台
quarkus.console.enabled=false

# ==================== 启动优化（极限） ====================
# 禁用自动建表
quarkus.hibernate-orm.database.generation=none
# 禁用SQL加载
quarkus.hibernate-orm.sql-load-script=no-file

# ==================== 内存管理 ====================
# 建议JVM参数: -Xms128m -Xmx256m -XX:+UseSerialGC

# ==================== 警告信息 ====================
# 注意：此配置为极限优化，可能影响功能完整性
# 仅建议在20人以下的小规模排班使用
