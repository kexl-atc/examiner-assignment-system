# æ•°æ®åº“é…ç½®
quarkus.datasource.db-kind=h2
quarkus.datasource.username=sa
quarkus.datasource.password=
quarkus.datasource.jdbc.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1

# å¼€å‘ç¯å¢ƒå¼ºåˆ¶é…ç½® (ç¡®ä¿èƒ½æ­£å¸¸å¯åŠ¨)
%dev.quarkus.datasource.db-kind=h2
%dev.quarkus.datasource.username=sa
%dev.quarkus.datasource.password=
%dev.quarkus.datasource.jdbc.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1

# PostgreSQLé…ç½®ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
%prod.quarkus.datasource.db-kind=h2
%prod.quarkus.datasource.username=sa
%prod.quarkus.datasource.password=
# ğŸ”§ å±€åŸŸç½‘ä¼˜åŒ–ï¼šH2æ•°æ®åº“æ€§èƒ½è°ƒä¼˜
# - DB_CLOSE_DELAY=-1: ä¿æŒè¿æ¥ä¸å…³é—­
# - CACHE_SIZE: å¢åŠ ç¼“å­˜å¤§å°ï¼ˆé»˜è®¤16KBï¼Œè°ƒæ•´ä¸º64KBï¼‰
# - LOG=0: ç¦ç”¨äº‹åŠ¡æ—¥å¿—ä»¥æé«˜å†™å…¥æ€§èƒ½
# - LOCK_MODE=0: ç¦ç”¨é”å®šä»¥æé«˜å¹¶å‘æ€§èƒ½ï¼ˆé€‚åˆå•æœºéƒ¨ç½²ï¼‰
%prod.quarkus.datasource.jdbc.url=jdbc:h2:file:./data/examiner_db;DB_CLOSE_DELAY=-1;CACHE_SIZE=65536;LOG=0;LOCK_MODE=0;UNDO_LOG=0
%prod.quarkus.hibernate-orm.database.generation=none
%prod.quarkus.hibernate-orm.sql-load-script=no-file
%prod.quarkus.flyway.migrate-at-start=true

# ğŸ”§ å±€åŸŸç½‘ä¼˜åŒ–ï¼šHibernateè¿æ¥æ± é…ç½®
%prod.quarkus.datasource.jdbc.min-size=2
%prod.quarkus.datasource.jdbc.max-size=10
%prod.quarkus.datasource.jdbc.idle-removal-interval=5m

# Flywayé…ç½®
quarkus.flyway.migrate-at-start=true
quarkus.flyway.locations=classpath:db/migration
# ğŸ”§ ä¿®å¤è¿ç§»æ ¡éªŒå¤±è´¥ï¼šå…è®¸æ ¡éªŒå¤±è´¥æ—¶è‡ªåŠ¨ä¿®å¤
%prod.quarkus.flyway.validate-on-migrate=false
%prod.quarkus.flyway.baseline-on-migrate=true

# Hibernateé…ç½®
quarkus.hibernate-orm.database.generation=drop-and-create
quarkus.hibernate-orm.log.sql=false
# ç¦ç”¨Hibernateæ¨¡å¼éªŒè¯ä»¥é¿å…H2æ•°æ®åº“ç±»å‹ä¸åŒ¹é…é—®é¢˜
quarkus.hibernate-orm.validate-in-dev-mode=false
# ç¦ç”¨æ¨¡å¼éªŒè¯
quarkus.hibernate-orm.sql-load-script=no-file

# HTTPé…ç½®
quarkus.http.port=8080
%dev.quarkus.http.port=8081
quarkus.http.host=0.0.0.0
quarkus.http.cors=true
# ğŸ”§ å…³é”®ä¿®å¤ï¼šå…è®¸æ‰€æœ‰Originï¼ˆåŒ…æ‹¬file://ã€nullç­‰ï¼‰
quarkus.http.cors.origins=*
quarkus.http.cors.headers=*
quarkus.http.cors.methods=*
quarkus.http.cors.exposed-headers=*
# ğŸ”§ å…è®¸æ‰€æœ‰è®¿é—®æ¨¡å¼
quarkus.http.cors.access-control-allow-credentials=true
quarkus.http.cors.access-control-max-age=86400

# WebSocketé…ç½® - ğŸ”§ å…³é”®ä¿®å¤ï¼šå®Œå…¨å¼€æ”¾ï¼Œæ”¯æŒElectron
quarkus.websocket.max-frame-size=1048576
quarkus.websocket.dispatch-to-worker=false

# ç¦ç”¨å¼€å‘æ•°æ®å¯¼å…¥ï¼ˆä¸´æ—¶ï¼‰
# %dev.quarkus.hibernate-orm.sql-load-script=import-dev.sql

# ç¦ç”¨ä¸éœ€è¦çš„åŠŸèƒ½
quarkus.banner.enabled=false

# ğŸš¨ æ—¥å¿—é…ç½®
# âš ï¸ è¯´æ˜ï¼šä¸ºäº†ä¾¿äºæ’æŸ¥é—®é¢˜ï¼Œé»˜è®¤å¯ç”¨æ–‡ä»¶æ—¥å¿—å¹¶ä¿ç•™å¿…è¦INFOï¼›å¯¹OptaPlanner/WebSocketç­‰å™ªå£°ç±»ä¿æŒè¾ƒé«˜é˜ˆå€¼.
quarkus.log.level=WARN
quarkus.log.category."com.examiner.scheduler".level=INFO
quarkus.log.category."com.examiner.scheduler.rest.ExamScheduleResource".level=INFO
quarkus.log.category."com.examiner.scheduler.websocket".level=ERROR
quarkus.log.category."io.undertow.websockets".level=ERROR
quarkus.log.category."org.optaplanner".level=WARN
quarkus.log.category."org.optaplanner.core".level=WARN
quarkus.log.category."io.quarkus".level=WARN
quarkus.log.category."io.vertx".level=ERROR
quarkus.log.category."org.hibernate".level=ERROR
quarkus.log.category."io.undertow".level=ERROR
quarkus.log.category."org.jboss".level=ERROR
quarkus.log.category."com.examiner.scheduler.solver".level=INFO

# ğŸš¨ å¯¹æ‰€æœ‰ profile å¼ºåˆ¶ä½¿ç”¨ç›¸åŒçš„æ—¥å¿—çº§åˆ«
%standard.quarkus.log.level=WARN
%high-memory.quarkus.log.level=WARN
%low-memory.quarkus.log.level=WARN
%minimal.quarkus.log.level=WARN
%prod.quarkus.log.level=WARN

# ========================================
# ğŸ”§ æ§åˆ¶å°æ—¥å¿—é…ç½®
# ========================================
quarkus.log.console.enable=false
quarkus.log.console.level=OFF
%standard.quarkus.log.console.enable=false
%high-memory.quarkus.log.console.enable=false
%low-memory.quarkus.log.console.enable=false
%minimal.quarkus.log.console.enable=false
%prod.quarkus.log.console.enable=false

# ========================================
# ğŸ“ æ–‡ä»¶æ—¥å¿—é…ç½® - é»˜è®¤å¯ç”¨ï¼Œç»Ÿä¸€å†™å…¥ ./logs/backend.log
# ========================================
quarkus.log.file.enable=true
quarkus.log.file.path=./logs/backend.log
quarkus.log.file.level=INFO
quarkus.log.file.format=%d{yyyy-MM-dd HH:mm:ss.SSS} %-5p [%c{3.}] (%t) %s%e%n
quarkus.log.file.rotation.max-file-size=20M
quarkus.log.file.rotation.max-backup-index=5
quarkus.log.file.rotation.file-suffix=.yyyy-MM-dd
quarkus.log.file.rotation.rotate-on-boot=true

%standard.quarkus.log.file.enable=true
%high-memory.quarkus.log.file.enable=true
%low-memory.quarkus.log.file.enable=true
%minimal.quarkus.log.file.enable=true
%prod.quarkus.log.file.enable=true

# ========================================
# ğŸ”§ å­—ç¬¦ç¼–ç é…ç½® - è§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜
# ========================================
# æ³¨æ„ï¼šå­—ç¬¦ç¼–ç é€šè¿‡JVMå‚æ•°è®¾ç½®ï¼š-Dfile.encoding=UTF-8 -Dconsole.encoding=UTF-8

# OptaPlanneré…ç½® - ğŸ”§ ä¼˜åŒ–ï¼šå¢åŠ æ±‚è§£æ—¶é—´ï¼Œæé«˜æ¢ç´¢èƒ½åŠ›
quarkus.optaplanner.solver.termination.spent-limit=120s
quarkus.optaplanner.solver.termination.unimproved-spent-limit=20s
quarkus.optaplanner.solver.termination.best-score-limit=0hard/0soft
# æ³¨é‡Šï¼šstep-count-limit åœ¨ application.properties ä¸­ä¸è¢«è¯†åˆ«ï¼Œæ”¹ç”¨ solverConfig.xml

# ========================================
# ğŸš€ v7.1.0 æ€§èƒ½ä¼˜åŒ–é…ç½®
# ========================================
# å¯ç”¨æ€§èƒ½æ¨¡å¼ - ç¦ç”¨çº¦æŸè¯„ä¼°ä¸­çš„è¯¦ç»†æ—¥å¿—ï¼Œæå‡æ€§èƒ½20-30%
optaplanner.performance.mode=true
# ç¦ç”¨çº¦æŸç»Ÿè®¡åŠŸèƒ½ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
optaplanner.statistics.enabled=false

# Droolsé…ç½® - å¼ºåˆ¶ä½¿ç”¨ECJç¼–è¯‘å™¨ï¼ˆç”¨äºJREç¯å¢ƒï¼‰
drools.dialect.java.compiler=ECLIPSE
drools.dialect.java.compiler.lnglevel=17
drools.compiler.lnglevel=1.8
drools.mvel.compiler.lnglevel=1.8
org.drools.compiler.kie.builder.impl.KieModuleKieProject.CheckKieModuleIntegrity=false
kie.maven.settings.custom=/dev/null

# ========================================
# ğŸ”§ æ‰“åŒ…é…ç½® - ç”Ÿæˆquarkus-appç›®å½•ç»“æ„
# ========================================
quarkus.package.type=fast-jar