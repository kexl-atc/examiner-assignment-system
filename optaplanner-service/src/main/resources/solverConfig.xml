<?xml version="1.0" encoding="UTF-8"?>
<solver>

    <!-- è§£å†³æ–¹æ¡ˆç±» -->
    <solutionClass>com.examiner.scheduler.domain.ExamSchedule</solutionClass>
    
    <!-- è§„åˆ’å®žä½“ç±» -->
    <entityClass>com.examiner.scheduler.domain.ExamAssignment</entityClass>
    
    <!-- çº¦æŸæä¾›è€… -->
    <scoreDirectorFactory>
        <constraintProviderClass>com.examiner.scheduler.solver.OptimizedExamScheduleConstraintProvider</constraintProviderClass>
    </scoreDirectorFactory>
    
    <!-- ðŸš€ æ€§èƒ½ä¼˜åŒ–ï¼šå¯ç”¨å¤šçº¿ç¨‹ç§»åŠ¨è¯„ä¼° (æš‚æ—¶å…³é—­ä»¥æé«˜ç¨³å®šæ€§) -->
    <moveThreadCount>NONE</moveThreadCount>
    
    <!-- ðŸš€ å¤§è§„æ¨¡é—®é¢˜ä¼˜åŒ–é…ç½®ï¼ˆ>100åå­¦å‘˜ï¼‰
         æ³¨æ„ï¼šå°è§„æ¨¡é—®é¢˜ï¼ˆâ‰¤20äººï¼‰å’Œä¸­è§„æ¨¡é—®é¢˜ï¼ˆ21-100äººï¼‰åº”ä½¿ç”¨Javaä»£ç é…ç½®ï¼Œ
         æ­¤XMLé…ç½®ä»…ä½œä¸ºå¤§è§„æ¨¡é—®é¢˜çš„å¤‡ç”¨é…ç½® -->
    <termination>
        <or>
            <!-- æ¡ä»¶1ï¼šæœ€å¤§æ±‚è§£æ—¶é—´120ç§’ï¼ˆå¤§è§„æ¨¡é—®é¢˜ï¼‰ -->
            <spentLimit>PT120S</spentLimit>
            <!-- æ¡ä»¶2ï¼š20ç§’å†…æ²¡æœ‰æ”¹è¿›å°±åœæ­¢ -->
            <unimprovedSpentLimit>PT20S</unimprovedSpentLimit>
            <!-- ðŸ”§ å…³é”®ä¿®å¤ï¼šç§»é™¤bestScoreLimitï¼Œé¿å…è¿‡æ—©ç»ˆæ­¢ -->
            <!-- è®©æ±‚è§£å™¨å……åˆ†éªŒè¯æ‰€æœ‰ç¡¬çº¦æŸï¼Œé¿å…è¿”å›ž"ä¼ªå®Œç¾Ž"è§£ -->
        </or>
    </termination>
    
    <!-- ðŸ”§ æ”¹è¿›çš„æž„é€ å¯å‘å¼ç®—æ³• -->
    <constructionHeuristic>
        <!-- ä½¿ç”¨FIRST_FIT_DECREASINGï¼Œä½†å…è®¸æ›´å¤šæŽ¢ç´¢ -->
        <constructionHeuristicType>FIRST_FIT_DECREASING</constructionHeuristicType>
        <!-- ðŸš€ ä½¿ç”¨å®žä½“éš¾åº¦æŽ’åº -->
        <entitySorterManner>DECREASING_DIFFICULTY</entitySorterManner>
        <!-- ðŸš€ ä½¿ç”¨å€¼å¼ºåº¦æŽ’åº -->
        <valueSorterManner>INCREASING_STRENGTH</valueSorterManner>
        <forager>
            <!-- ðŸ”§ å‡å°‘åˆ°50ï¼ŒåŠ å¿«åˆå§‹è§£æž„é€  -->
            <acceptedCountLimit>50</acceptedCountLimit>
        </forager>
    </constructionHeuristic>
    
    <!-- ðŸ”§ ä¼˜åŒ–çš„å±€éƒ¨æœç´¢ç®—æ³• - ðŸš€ æ€§èƒ½ä¼˜åŒ–ï¼šæ·»åŠ å¤šé˜¶æ®µæœç´¢ + è¿‘é‚»é€‰æ‹© -->
    <localSearch>
        <!-- ç¬¬ä¸€é˜¶æ®µ: å¿«é€ŸæŽ¢ç´¢ï¼ˆå‰30ç§’ï¼‰ -->
        <localSearchPhase>
            <unionMoveSelector>
                <changeMoveSelector>
                    <cacheType>PHASE</cacheType>
                    <selectionOrder>CACHED</selectionOrder>
                </changeMoveSelector>
                <swapMoveSelector>
                    <cacheType>PHASE</cacheType>
                    <selectionOrder>CACHED</selectionOrder>
                </swapMoveSelector>
            </unionMoveSelector>
            <acceptor>
                <entityTabuSize>7</entityTabuSize>
                <valueTabuSize>7</valueTabuSize>
            </acceptor>
            <forager>
                <acceptedCountLimit>1000</acceptedCountLimit>
            </forager>
            <termination>
                <spentLimit>PT30S</spentLimit>
            </termination>
        </localSearchPhase>
        
        <!-- ç¬¬äºŒé˜¶æ®µ: ðŸš€ è¿‘é‚»é€‰æ‹©ç²¾ç»†ä¼˜åŒ–ï¼ˆ30-90ç§’ï¼‰ -->
        <localSearchPhase>
            <unionMoveSelector>
                <!-- ðŸš€ è¿‘é‚»é€‰æ‹©ï¼šåŸºäºŽç§‘å®¤ç›¸è¿‘åº¦ä¼˜å…ˆé€‰æ‹©åˆé€‚çš„è€ƒå®˜ -->
                <changeMoveSelector>
                    <entitySelector id="entitySelector1"/>
                    <valueSelector>
                        <!-- é’ˆå¯¹examiner2å˜é‡ä½¿ç”¨è¿‘é‚»é€‰æ‹© -->
                        <variableName>examiner2</variableName>
                        <nearbySelection>
                            <originEntitySelector>
                                <mimicSelectorRef>entitySelector1</mimicSelectorRef>
                            </originEntitySelector>
                            <nearbyDistanceMeterClass>com.examiner.scheduler.solver.TeacherDepartmentDistanceMeter</nearbyDistanceMeterClass>
                            <!-- ðŸš€ æŠ›ç‰©çº¿åˆ†å¸ƒï¼š80%é€‰æ‹©æœ€è¿‘çš„20ä¸ªè€ƒå®˜ï¼Œ20%éšæœºæŽ¢ç´¢ -->
                            <parabolicDistributionSizeMaximum>20</parabolicDistributionSizeMaximum>
                        </nearbySelection>
                    </valueSelector>
                </changeMoveSelector>
                <!-- å¤‡ä»½è€ƒå®˜ä¹Ÿä½¿ç”¨è¿‘é‚»é€‰æ‹© -->
                <changeMoveSelector>
                    <entitySelector id="entitySelector2"/>
                    <valueSelector>
                        <variableName>backupExaminer</variableName>
                        <nearbySelection>
                            <originEntitySelector>
                                <mimicSelectorRef>entitySelector2</mimicSelectorRef>
                            </originEntitySelector>
                            <nearbyDistanceMeterClass>com.examiner.scheduler.solver.TeacherDepartmentDistanceMeter</nearbyDistanceMeterClass>
                            <parabolicDistributionSizeMaximum>20</parabolicDistributionSizeMaximum>
                        </nearbySelection>
                    </valueSelector>
                </changeMoveSelector>
            </unionMoveSelector>
            <acceptor>
                <!-- ðŸ”§ ä½¿ç”¨Late AcceptanceèŽ·å¾—æ›´å¥½çš„æ”¶æ•› -->
                <lateAcceptanceSize>400</lateAcceptanceSize>
            </acceptor>
            <forager>
                <acceptedCountLimit>1</acceptedCountLimit>
            </forager>
            <termination>
                <spentLimit>PT60S</spentLimit>
            </termination>
        </localSearchPhase>
    </localSearch>
    
</solver>